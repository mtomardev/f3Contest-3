<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="./style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
</head>
<body>

    <!---------- Navigation ---------->
    <nav class="navbar bg-dark" data-bs-theme="dark">
        <div class="container-fluid">
          <a class="navbar-brand">Teacher Portal</a>
          <form class="d-flex" role="search">
            <a class="navbar-brand" href="./index.html">Signup</a>
            <a class="navbar-brand" href="./login.html">Login</a>
          </form>
        </div>
      </nav>
      <!---------- Navigation ---------->

       <form class="login margin">
        <legend>Teachers Login</legend>
        
        <div class="mb-3">
            <input type="email" id="email" class="form-control" value="Email" style="border-radius: 0 !important;">
          </div>

        <div class="mb-3">
          <input type="text"  id="password" class="form-control" value="Password" style="border-radius: 0 !important;">
        </div>
        
          <div class="d-grid gap-2 col-1 ">
            <button type="submit" class="btn btn-dark" style="border-radius: 0 !important;">Login</button>
          </div>
        
      </form>   




    <script>
            let login_form = document.querySelector('.login');
            let input_email = document.querySelector('#email');
            let input_password = document.querySelector('#password');

            

            login_form.addEventListener('submit', logiaVlidation);

            //let User_details

            function logiaVlidation(e){
                e.preventDefault();

                let email = input_email.value;
                let password = input_password.value;

                
                
                let user_records=new Array();
                user_records=JSON.parse(localStorage.getItem("User"))?JSON.parse(localStorage.getItem("User")):[]
                


                if(user_records.some((v)=>{return v.email==email && v.password==password})){
                    alert("Login Pass");
                    
                    let token = "";
                    let string = "123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ~`!@#$%^&*()_-+={[\<>]}"
                    for(let i=0; i<16; i++){
                        token += string.charAt(Math.floor(Math.random()*string.length));  
                    }
                            
                    let newArr= [];
                    let objNewArray = {email, password, token,};
                    newArr.push(objNewArray);

                    localStorage.setItem("CurrentUser", JSON.stringify(newArr))
                    
                    window.location.href="./dashboard.html"
                }
                else{
                      alert('Login Fail');
                      
                }   
            }


    </script>
</body>
</html>